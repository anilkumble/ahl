<div class="container" >
  <button class="btn-primary" data-value="start_match">Start Match</button>
  <button class="btn-primary" data-value="goals">Update Goals</button>
  <button class="btn-primary" data-value="live_commentary">Create Commentary</button>
  <button class="btn-primary" data-value="update_result">Update Result</button>
  <button class="btn-primary"  data-value="new_match">Create New Match</button>
  <button class="btn-primary" data-value="player">New Player</button>
  <button class=btn-primary data-value="all_matches">Show all matches</button>
  <button class=btn-primary data-value="all_players">Show all players</button>
  <!-- Start Division -->
  <div class="area" id="start_match" hidden>
  <br>  
  <div id = "notification_start_div" class="alert alert-success" hidden> </div>
  <h1>Start Match</h1>
  <% if !@running_match %>
    <% @match = Match.where(result: -2).first %>
    <%= render 'matches/form' %>
  <% else %>
    <div class="alert alert-danger">
      Update the result of the Running Match. Then start the new match.
    </div>
  <% end %>
  </div>
  <!-- Start Division ends-->

  <!-- Update Goals Division -->

  <div class="area" id="goals" style="display: none">
  <br> 
  <h1>Update Goals</h1>
    <% if @goals != nil %> <!--  If -->
      <%= render "goals/form" %>

      <table class="table table-responsive table-hover table-condensed">
       <thead>
        <tr>
            <th>Goal Scorer</th>
            <th>Opponent Team</th>
            <th colspan="1"></th>
        </tr>
        </thead>

        <tbody id="goal_table_body">
          
          <% @goals.each do |goal| %>
          
          <tr id="goal-<%= goal.id %>">
            <td><%= goal.player.name %></td>
            <td><%=  Team.find(goal.opponent_id).name%></td>
            <td><%= link_to 'Destroy', [@running_match, goal], remote: true, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    <% else %> <!--  else -->
      <div class="alert alert-danger">Match not yet started.</div>
    <% end %>

  </div>
  
  <!-- Update Goals Division ends -->


  <!-- Create Commentary Division -->
  <div class="area" id="live_commentary" style="display: none">
  <br/> 
  <h1 id="label_livescore">Create Live Scores</h1>

  <% if @commentary != nil %> <!--  If -->
    <div id = "commentary_form">
      <%= render 'live_scores/form' %>
    </div>
    <table class="table table-responsive table-hover table-condensed">
       <thead>
        <tr>
            <th><%= @current_match.first_team.name %> </th>
            <th><%= @current_match.opponent_team.name %> </th>
            <th>Commentaries</th>
        </tr>
      </thead>

      <tbody id="commentary_table_body">
          
          <% @commentaries.each do |commentary| %>
          <tr id="commentary-<%= commentary.id %>">
            <td><%= commentary.teamtwo_goals %></td>
            <td><%= commentary.teamone_goals %></td>
            <td><%= commentary.commentary %></td>
            <td ><%= link_to 'Edit', edit_live_score_path(commentary)%> </td>
        		<td><%= link_to 'Destroy', commentary, remote: true, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
          <% end %>
      </tbody>
    </table>

    <% else %> <!--  else -->
      <div class="alert alert-danger">Match not yet started.</div>
    <% end %> <!-- end -->
  </div> 
  <!--Create Commentary Div Ends-->

  <!-- Update Result division-->
  <div class="area" id="update_result" hidden> 
  <br>
  <h1>Update result</h1>
    <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2">
            <div class="alert alert-danger">
                Note:&nbsp;&nbsp;If man of the match is not yet decided, don't update the result
                <br> Update both the fields or none
            </div>
            
        </div> <!-- /column -->
    </div> <!-- /row -->
  </div>
  <!-- Update Result division ends -->

  <!-- New Match division starts -->
  <div class="area" id="new_match" style="display: none">
    <h1>New Match</h1>
    <div id = "notification_create_new_match_div" class="alert alert-success" hidden> </div>
    <% @match = Match.new %>
    <%= render 'matches/form' %>
  </div>
  <!-- New Match division ends -->

  <!-- New player division starts -->
  <div class="area" id="player" style="display: none">
    <div class="container">
    <div class="row">
        <br>
        <div class="col-xs-12">
            <h1>New Player</h1>
            <%= render 'players/form' %>
        </div>
      </div>
    </div>
  </div>
  <!-- New Match division ends -->

  <!-- All Match division starts -->  
  <div class="area" id="all_matches" hidden>
  <br>
  <h1>All Matches</h1>
    <div class="container">
    <div class="row">
        <div class="col-xs-12">
            <%if notice %>
                <div class="alert alert-info"><%= notice %></div>
            <%elsif alert %>
                <div class="alert alert-danger"> <%= alert %> </div>
            <% end %>
            <table class="table table-striped table-condensed table-hover table-responsive">
                <thead>
                    <tr>
                        <th>Match id</th>
                        <th>Team one</th>
                        <th>Team two</th>
                        <!--<th>Date</th>-->
                        <th>Result</th>
                        <th>Man of the match</th>
                        <th> Jungles Award</th>
                        <th colspan="5"></th>
                    </tr>
                </thead>

                <tbody>
                    <% @matches.each do |match| %>
                        <tr  id="match-<%= match.id %>">

                            <td><%= match.id %></td>
                            <td><%= match.first_team.name %></td>
                            <td><%= match.opponent_team.name %></td>
                            <td><%= match.winner %></td>
                            <!-- Check this piece of code -->
                            <td>
                                <% if  match.man_of_the_match and match.man_of_the_match != 0%>
                                    <% player_of_the_match = Player.find(match.man_of_the_match) %>
                                    <%= player_of_the_match.name %>
                                <% else %>
                                    not yet decided
                                <% end %>
                             </td>
                             <td>
                                 <% if match.trump_card %>
                                    <% trump_card =  Player.find(match.trump_card) %>
                                    <%= trump_card.name %>
                                <% else %>
                                    not yet decided
                                 <% end %>
                             </td>
                             <td><%= link_to "Edit", edit_match_path(match), target: "_blank" %></td>
                             <td><%= link_to "Delete", match, remote: true, method: :delete, data: {confirm: "Are you sure?"} %></td>
                        </tr>
                    <% end %>
                </tbody>

            </table>
        </div> <!-- /column -->
      </div> <!-- /row -->
    </div><!-- /container -->
  </div>
  <!-- All Match division ends -->

  <!-- All Players Division ends -->
  <div class="area" id="all_players" hidden>
  <br>
  <div class="container">
    <h1>Squad</h1>
    <table class="table table-striped table-condensed table-hover table-responsive">
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Age</th>
          <th>Team</th>
          <th>Position</th>
          <th>Goals</th>
          <th colspan="2"></th>
        </tr>
      </thead>

      <tbody>
        <% @players.each do |player| %>
          <tr id="player-<%= player.id %>">
            <td><%= player.id %></td>
            <td><%= player.name %></td>
            <td><%= player.age %></td>
            <td><%= player.team.name %></td>
            <td><%= player.position %></td>
            <td><%= player.goals %></td>
            <td><%= link_to 'Edit', edit_player_path(player), target: "_blank" %></td>
            <td><%= link_to 'Destroy', player, remote: true, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  </div>
  <!-- All Players Division ends -->


</div>